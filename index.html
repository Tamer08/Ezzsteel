<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªØ­Ø¯ÙŠØ« Ø­Ø¯ÙŠØ¯ Ø¹Ø² Ø§Ù„Ø³Ø§Ø¯Ø§Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

<style>
/* Ù†ÙØ³ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª */
* { box-sizing: border-box; }
body {
    margin: 0; font-family: "Segoe UI", Tahoma, Arial, sans-serif;
    background: linear-gradient(180deg, #f3f4f6, #e5e7eb);
    min-height: 100vh; display: flex; align-items: center; justify-content: center;
}
.card {
    background: #ffffff; width: 100%; max-width: 420px;
    border-radius: 24px; padding: 30px 24px 35px;
    text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.25);
}
.app-icon { width: 220px; height: auto; border-radius: 24px; margin-bottom: 15px; }
h1 { margin: 10px 0 6px; font-size: 24px; color: #111; }
.subtitle { font-size: 14px; color: #6b7280; margin-bottom: 10px; }
.update-status { font-size: 14px; margin-bottom: 18px; font-weight: bold; }
.features { text-align: right; font-size: 15px; color: #374151; margin: 20px 0 10px; line-height: 1.9; }
.features span { display: block; }

.action-btn {
    display: block; margin: 28px auto 10px; padding: 16px 0; width: 100%;
    color: #fff; font-size: 18px; font-weight: bold;
    border-radius: 50px; border: none; cursor: pointer;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15); transition: transform 0.2s;
    text-decoration: none;
}
.action-btn:active { transform: scale(0.98); }

.btn-update { background: #FEA500; color: #000; } /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ù„Ù„ØªØ­Ù…ÙŠÙ„/Ø§Ù„ØªØ­Ø¯ÙŠØ« */
.btn-latest { background: #16a34a; cursor: default; } /* Ø£Ø®Ø¶Ø± (ØºÙŠØ± ÙØ¹Ø§Ù„) */
.btn-install { background: #2563eb; } /* Ø£Ø²Ø±Ù‚ Ù„Ù„ØªØ«Ø¨ÙŠØª */

.progress-container { margin: 28px auto 10px; display: none; width: 100%; }
.progress-label { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 8px; font-weight: bold; color: #555; }
.progress-bar-bg { width: 100%; height: 12px; background: #e5e7eb; border-radius: 10px; overflow: hidden; }
.progress-bar-fill { height: 100%; width: 0%; background: #FEA500; border-radius: 10px; transition: width 0.3s ease; }

.version { margin-top: 14px; font-size: 13px; color: #6b7280; }
.footer { margin-top: 14px; font-size: 12px; color: #9ca3af; }
.social-share { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
.social-share a { font-size: 30px; color: #6b7280; transition: color 0.3s; }
.social-share a:hover { color: #FEA500; }
</style>
</head>

<body>

<div class="card">
    <img class="app-icon" src="https://i.top4top.io/p_3649ro0yu0.jpg" alt="Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚">
    <h1>Ø­Ø¯ÙŠØ¯ Ø¹Ø² Ø§Ù„Ø³Ø§Ø¯Ø§Øª</h1>
    <div class="subtitle">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©</div>

    <div id="updateStatus" class="update-status" style="color:#666">
        Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…...
    </div>

    <div class="features">
        <span>âœ” Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ÙˆØ±Ø§Ø¯ÙŠ ÙˆØ§Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª</span>
        <span>âœ” Ø§Ù„Ø¹Ø·Ù„Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© ÙˆØ§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª</span>
        <span>âœ” Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦</span>
        <span>âœ” Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©</span>
    </div>

    <button id="mainBtn" class="action-btn btn-latest">...</button>

    <div id="progressArea" class="progress-container">
        <div class="progress-label">
            <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            <span id="progressText">0%</span>
        </div>
        <div class="progress-bar-bg">
            <div id="progressFill" class="progress-bar-fill"></div>
        </div>
    </div>

    <div class="version">
        Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø«Ø¨Øª: <strong id="installedVer">...</strong>
    </div>

    <div class="footer">Â© 2026 Ø­Ø¯ÙŠØ¯ Ø¹Ø² Ø§Ù„Ø³Ø§Ø¯Ø§Øª</div>

    <div class="social-share">
        <a href="https://wa.me/?text=Ø­Ù…Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø­Ø¯ÙŠØ¯ Ø¹Ø² Ø§Ù„Ø³Ø§Ø¯Ø§Øª: https://tamer08.github.io/Ezzsteel/" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://t.me/share/url?url=https://tamer08.github.io/Ezzsteel/" target="_blank"><i class="fab fa-telegram-plane"></i></a>
    </div>
</div>

<script>
const repo = "Tamer08/Ezzsteel";
let downloadUrl = "";
let savedFilePath = "";

// Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
function setAppVersion(realVersion) {
    document.getElementById("installedVer").innerText = realVersion;
    checkGitHubUpdates(realVersion);
}

// ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
function checkGitHubUpdates(currentVersion) {
    fetch(`https://api.github.com/repos/${repo}/releases/latest`)
    .then(res => res.json())
    .then(data => {
        const latestVersion = data.tag_name.replace("v","");
        const btn = document.getElementById("mainBtn");
        const status = document.getElementById("updateStatus");

        if(data.assets && data.assets.length > 0) {
            downloadUrl = data.assets[0].browser_download_url;
        }

        // === Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ===
        
        // 1. Ù‡Ù„ Ù†Ø­Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ
        if (typeof Android !== 'undefined') {
            
            // Ù†Ø¹Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
            if (latestVersion !== currentVersion) {
                // ÙŠÙˆØ¬Ø¯ ØªØ­Ø¯ÙŠØ«
                status.innerHTML = "ğŸš€ Ø¥ØµØ¯Ø§Ø± Ø¬Ø¯ÙŠØ¯ Ù…ØªØ§Ø­: " + latestVersion;
                status.style.color = "#dc2626"; // Ø£Ø­Ù…Ø±
                btn.innerHTML = "ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ·Ø¨ÙŠÙ‚";
                btn.className = "action-btn btn-update";
                btn.onclick = startDownload;
            } else {
                // Ù…Ø­Ø¯Ø«
                status.innerHTML = "âœ… Ø£Ù†Øª ØªØ³ØªØ®Ø¯Ù… Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø±";
                status.style.color = "#16a34a"; // Ø£Ø®Ø¶Ø±
                btn.innerHTML = "Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø­Ø¯Ø«";
                btn.className = "action-btn btn-latest";
                btn.onclick = null; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø±
            }

        } else {
            // 2. Ù†Ø­Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­ (Chrome)
            // Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù†Ø¹Ø±Ø¶ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø£Ù† Ø§Ù„Ø²Ø§Ø¦Ø± ØºØ§Ù„Ø¨Ø§Ù‹ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ‡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø£Ùˆ ÙŠØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„Ù‡
            status.innerHTML = "Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø± Ù…ØªØ§Ø­: " + latestVersion;
            status.style.color = "#333";
            btn.innerHTML = "ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚";
            btn.className = "action-btn btn-update";
            btn.onclick = startDownload;
            
            // ØªØºÙŠÙŠØ± Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ù„ÙŠØ¹Ø±Ù Ø£Ù†Ù‡ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
            document.getElementById("installedVer").innerText = "Ù†Ø³Ø®Ø© Ø§Ù„ÙˆÙŠØ¨";
        }
    })
    .catch(() => {
        document.getElementById("updateStatus").innerText = "âš ï¸ ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…";
        const btn = document.getElementById("mainBtn");
        btn.innerHTML = "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©";
        btn.className = "action-btn btn-update";
        btn.onclick = () => location.reload();
    });
}

// Fallback (Ù„Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ£ØªÙ Ø±Ø¯ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚)
setTimeout(() => {
    if (document.getElementById("installedVer").innerText === "...") {
        // Ù†ÙØªØ±Ø¶ Ø£Ù†Ù‡ Ù…ØªØµÙØ­ ÙˆÙ†ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
        checkGitHubUpdates("0.0");
    }
}, 3000);

// Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
function startDownload() {
    if (!navigator.onLine) { alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª"); return; }
    if (!downloadUrl) { alert("Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„ ØºÙŠØ± Ø¬Ø§Ù‡Ø²"); return; }

    // Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
    if (typeof Android !== 'undefined') {
        document.getElementById("mainBtn").style.display = "none";
        document.getElementById("progressArea").style.display = "block";
        Android.startDownload(downloadUrl);
    } 
    // Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­: ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±
    else {
        window.location.href = downloadUrl;
        const btn = document.getElementById("mainBtn");
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†Ø²ÙŠÙ„...";
        setTimeout(() => {
             btn.innerText = "ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
        }, 3000);
    }
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ· (Ù„Ù„ØªØ·Ø¨ÙŠÙ‚)
function updateProgress(percent) {
    document.getElementById("progressFill").style.width = percent + "%";
    document.getElementById("progressText").innerText = percent + "%";
}

// Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ù„Ù„ØªØ·Ø¨ÙŠÙ‚)
function onDownloadComplete(path) {
    savedFilePath = path;
    document.getElementById("progressArea").style.display = "none";
    
    const btn = document.getElementById("mainBtn");
    btn.style.display = "block";
    btn.innerHTML = "ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ­Ø¯ÙŠØ« ğŸ“²";
    btn.className = "action-btn btn-install";
    btn.onclick = () => {
        if (typeof Android !== 'undefined') {
            Android.installApk(savedFilePath);
        }
    };
    
    setTimeout(() => {
        if (typeof Android !== 'undefined') {
            Android.installApk(savedFilePath);
        }
    }, 1000);
}
</script>

</body>
</html>